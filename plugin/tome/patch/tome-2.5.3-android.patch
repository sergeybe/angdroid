diff -Nru --strip-trailing-cr tome-2.5.3/src/h-config.h tome-2.5.3-android/src/h-config.h
--- tome-2.5.3/src/h-config.h	2008-05-12 11:44:03.000000000 -0700
+++ tome-2.5.3-android/src/h-config.h	2010-09-26 09:02:44.000000000 -0700
@@ -193,7 +193,7 @@
  */
 #if !defined(MACINTOSH) && !defined(WINDOWS) && \
     !defined(MSDOS) && !defined(USE_EMX) && \
-    !defined(AMIGA) && !defined(ACORN) && !defined(VM)
+    !defined(AMIGA) && !defined(ACORN) && !defined(VM) && !defined(USE_AND)
 # define SET_UID
 #endif
 
diff -Nru --strip-trailing-cr tome-2.5.3/src/util.c tome-2.5.3-android/src/util.c
--- tome-2.5.3/src/util.c	2008-05-12 11:44:03.000000000 -0700
+++ tome-2.5.3-android/src/util.c	2010-09-26 17:55:43.000000000 -0700
@@ -287,7 +287,7 @@
 */
 errr path_temp(char *buf, int max)
 {
-#ifdef WINDOWS
+#if defined(WINDOWS) || defined(USE_AND)
 	static u32b tmp_counter;
 	static char valid_characters[] =
 			"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
